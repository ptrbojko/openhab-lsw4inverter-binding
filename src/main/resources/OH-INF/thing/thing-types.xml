<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="lswlogger"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<!-- Sample Thing Type -->
	<thing-type id="LSWLoggerV5">
		<label>LSW Logger</label>
		<description>LSW Logger, supported loggers with firmware LSW3_15_FFFF_1.0.57, LSW3_15_FFFF_1.0.65, ME_08_2701_2.06 (S/N formats: 17xxxxxxxx, 21xxxxxxxx)</description>

		<channels>
			<channel id="online" typeId="online-channel" />
			<channel id="operatingState" typeId="lsw-operatingState-channel" />
			<channel id="fault" typeId="fault-channel" />
			<channel id="gridAVoltage" typeId="gridVoltage-channel">
				<label>Grid A Voltage</label>
				<description>DC voltage of the first grid connected to the inverter</description>
			</channel>
			<channel id="gridACurrent" typeId="gridCurrent-channel">
				<label>Grid A Current</label>
				<description>DC current of the first grid connected to the inverter</description>
			</channel>
			<channel id="gridBVoltage" typeId="gridVoltage-channel">
				<label>Grid B Voltage</label>
				<description>DC voltage of the second grid connected to the inverter</description>
			</channel>
			<channel id="gridBCurrent" typeId="gridCurrent-channel">
				<label>Grid B Current</label>
				<description>DC current of the second grid connected to the inverter</description>
			</channel>
			<channel id="gridAPower" typeId="gridPower-channel">
				<label>Grid A Power</label>
				<description>Power of the first grid connected to the inverter</description>
			</channel>
			<channel id="gridBPower" typeId="gridPower-channel">
				<label>Grid B Power</label>
				<description>Power of the second grid connected to the inverter</description>
			</channel>
			<channel id="outputActivePower" typeId="activePower-channel" />
			<channel id="outputReactivePower" typeId="reactivePower-channel" />
			<channel id="outputFrequency" typeId="outputFrequency-channel" />
			<channel id="1stPhaseVoltage" typeId="acVoltage-channel">
				<label>1st Phase Voltage</label>
				<description>Voltage of the 1st phase genarated by inverter</description>
			</channel>
			<channel id="1stPhaseCurrent" typeId="acCurrent-channel">
				<label>1st Phase Current</label>
				<description>Current of the 1st phase generated by inverter</description>
			</channel>
			<channel id="2ndPhaseVoltage" typeId="acVoltage-channel">
				<label>2nd Phase Voltage</label>
				<description>Voltage of the 2nd phase genarated by inverter</description>
			</channel>
			<channel id="2ndPhaseCurrent" typeId="acCurrent-channel">
				<label>2nd Phase Current</label>
				<description>Current of the 2nd phase generated by inverter</description>
			</channel>
			<channel id="3rdPhaseVoltage" typeId="acVoltage-channel">
				<label>3rd Phase Voltage</label>
				<description>Voltage of the 3rd phase genarated by inverter</description>
			</channel>
			<channel id="3rdPhaseCurrent" typeId="acCurrent-channel">
				<label>3rd Phase Current</label>
				<description>Current of the 3rd phase generated by inverter</description>
			</channel>
			<channel id="totalEnergyProduction" typeId="totalEnergyProduction-channel" />
			<channel id="totalGenerationTime" typeId="totalGenerationTime-channel" />
			<channel id="todayEnergyProduction" typeId="todayEnergyProduction-channel" />
			<channel id="todayGenerationTime" typeId="todayGenerationTime-channel" />
			<channel id="inverterModuleTemperature" typeId="temperature-channel">
				<label>Module Temperature</label>
				<description>Module temperature</description>
			</channel>
			<channel id="inverterInnerTemperature" typeId="temperature-channel">
				<label>Inner Temperature</label>
				<description>Inner temperature</description>
			</channel>
		</channels>

		<config-description>
			<parameter name="hostname" type="text" required="true">
				<context>network-address</context>
				<label>Logger Hostname/IP</label>
				<description>Hostname or IP address of the device.</description>
			</parameter>
			<parameter name="port" type="integer" min="1" required="true">
				<label>Port</label>
				<description>TCP port of the device.</description>
				<default>8899</default>
			</parameter>
			<parameter name="serialNumber" type="integer" required="true">
				<context></context>
				<label>Logger serial number</label>
				<description>Logger serial number, those with format 17xxxx are confirmed to be supported.</description>
			</parameter>
			<parameter name="refreshTime" type="integer" required="true">
				<label>Refresh time</label>
				<description>Interval the device is polled in sec.</description>
				<default>120</default>
			</parameter>
			<parameter name="retriesCount" type="integer">
				<label>Number of retries</label>
				<description>Number of connecting retries before giving up and assuming that logger is offline</description>
				<default>10</default>
			</parameter>
			<parameter name="maxOfflineTime" type="integer">
				<label>maxOfflineTime</label>
				<description>Maximum time (in minutes) in which logger is assumed to be offline</description>
				<default>2160</default>
			</parameter>
		</config-description>
	</thing-type>

	<thing-type id="SN23xLoggerV5">
		<label>Loggers with SN 23 (beta)</label>
		<description>LSW Logger, supporting loggers based on iGEN V5 protocol (S/N 23xxxxxxxx format, maybe some of 21xxxxxxxx).</description>

		<channels>
			<channel id="online" typeId="online-channel" />
			<channel id="operatingState" typeId="SN23xLoggerV5-operatingState-channel" />
			<channel id="fault" typeId="fault-channel" />
			<channel id="countdown" typeId="countdown-channel" />
			<channel id="env1Temperature" typeId="temperature-channel" />
			<channel id="env2Temperature" typeId="temperature-channel" />
			<channel id="heatSink1Temperature" typeId="temperature-channel" />
			<channel id="heatSink2Temperature" typeId="temperature-channel" />
			<channel id="heatSink3Temperature" typeId="temperature-channel" />
			<channel id="heatSink4Temperature" typeId="temperature-channel" />
			<channel id="heatSink5Temperature" typeId="temperature-channel" />
			<channel id="heatSink6Temperature" typeId="temperature-channel" />
			<channel id="inv1Temperature" typeId="temperature-channel" />
			<channel id="inv2Temperature" typeId="temperature-channel" />
			<channel id="inv3Temperature" typeId="temperature-channel" />
			<channel id="rsvd1Temperature" typeId="temperature-channel" />
			<channel id="rsvd2Temperature" typeId="temperature-channel" />
			<channel id="rsvd3Temperature" typeId="temperature-channel" />
			<channel id="todayGenerationTime" typeId="todayGenerationTime-channel" />
			<channel id="totalGenerationTime" typeId="totalGenerationTime-channel" />
			<channel id="totalServiceTime" typeId="totalGenerationTime-channel" />
			<channel id="gridFrequency" typeId="outputFrequency-channel" />
			<channel id="outputActivePower" typeId="activePower-channel" />
			<channel id="totalOutputReactivePower" typeId="reactivePower-channel" />
			<channel id="totalOutputApparentPower" typeId="apparentPower-channel" />
			<channel id="totalPCCActivePower" typeId="activePower-channel" />
			<channel id="totalPCCReactivePower" typeId="reactivePower-channel" />
			<channel id="totalPCCApparentPower" typeId="apparentPower-channel" />
			<channel id="phaseRVoltage" typeId="gridVoltage-channel" />
			<channel id="phaseRCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseRActivePower" typeId="activePower-channel" />
			<channel id="phaseRReactivePower" typeId="reactivePower-channel" />
			<channel id="phaseRPowerFactor" typeId="powerfactor-channel" />
			<channel id="phaseRPCCCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseRPCCActivePower" typeId="activePower-channel" />
			<channel id="phaseRPCCReactivePower" typeId="reactivePower-channel" />
			<channel id="phaseRPCCPowerFactor" typeId="powerfactor-channel" />
			<channel id="phaseSVoltage" typeId="gridVoltage-channel" />
			<channel id="phaseSCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseSActivePower" typeId="activePower-channel" />
			<channel id="phaseSReactivePower" typeId="reactivePower-channel" />
			<channel id="phaseSPowerFactor" typeId="powerfactor-channel" />
			<channel id="phaseSPCCCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseSPCCActivePower" typeId="activePower-channel" />
			<channel id="phaseSPCCReactivePower" typeId="reactivePower-channel" />
			<channel id="phaseSPCCPowerFactor" typeId="powerfactor-channel" />
			<channel id="phaseTVoltage" typeId="gridVoltage-channel" />
			<channel id="phaseTCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseTActivePower" typeId="activePower-channel" />
			<channel id="phaseTReactivePower" typeId="reactivePower-channel" />
			<channel id="phaseTPowerFactor" typeId="powerfactor-channel" />
			<channel id="phaseTPCCCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseTPCCActivePower" typeId="activePower-channel" />
			<channel id="phaseTPCCReactivePower" typeId="reactivePower-channel" />
			<channel id="phaseTPCCPowerFactor" typeId="powerfactor-channel" />
			<channel id="pvExtActivePower" typeId="activePower-channel" />
			<channel id="loadSysActivePower" typeId="activePower-channel" />
			<channel id="phaseL1NVoltage" typeId="gridVoltage-channel" />
			<channel id="phaseL1NCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseL1NActivePower" typeId="activePower-channel" />
			<channel id="phaseL1NPCCCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseL1NPCCActivePower" typeId="activePower-channel" />
			<channel id="phaseL2NVoltage" typeId="gridVoltage-channel" />
			<channel id="phaseL2NCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseL2NActivePower" typeId="activePower-channel" />
			<channel id="phaseL2NPCCCurrent" typeId="gridCurrent-channel" />
			<channel id="phaseL2NPCCActivePower" typeId="activePower-channel" />
			<channel id="lineL1Voltage" typeId="gridVoltage-channel" />
			<channel id="lineL2Voltage" typeId="gridVoltage-channel" />
			<channel id="lineL3Voltage" typeId="gridVoltage-channel" />
			<channel id="todayEnergyProduction" typeId="todayEnergyProduction-channel" />
			<channel id="totalEnergyProduction" typeId="totalEnergyProduction-channel" />
			<channel id="todayEnergyConsumption" typeId="todayEnergyProduction-channel" />
			<channel id="totalEnergyConsumption" typeId="totalEnergyProduction-channel" />
			<channel id="todayEnergyPurchased" typeId="todayEnergyProduction-channel" />
			<channel id="totalEnergyPurchased" typeId="totalEnergyProduction-channel" />
			<channel id="todayEnergySold" typeId="todayEnergyProduction-channel" />
			<channel id="totalEnergySold" typeId="totalEnergyProduction-channel" />
			<channel id="todayBatteryCharged" typeId="todayEnergyProduction-channel" />
			<channel id="totalBatteryCharged" typeId="totalEnergyProduction-channel" />
			<channel id="todayBatteryDischarged" typeId="todayEnergyProduction-channel" />
			<channel id="totalBatteryDischarged" typeId="totalEnergyProduction-channel" />
		</channels>

		<config-description>
			<parameter name="hostname" type="text" required="true">
				<context>network-address</context>
				<label>Logger Hostname/IP</label>
				<description>Hostname or IP address of the device.</description>
			</parameter>
			<parameter name="port" type="integer" min="1" required="true">
				<label>Port</label>
				<description>TCP port of the device.</description>
				<default>8899</default>
			</parameter>
			<parameter name="serialNumber" type="integer" required="true">
				<context></context>
				<label>Logger serial number</label>
				<description>Logger serial number, those with format 17xxxx are confirmed to be supported.</description>
			</parameter>
			<parameter name="refreshTime" type="integer" required="true">
				<label>Refresh time</label>
				<description>Interval the device is polled in sec.</description>
				<default>120</default>
			</parameter>
			<parameter name="retriesCount" type="integer">
				<label>Number of retries</label>
				<description>Number of connecting retries before giving up and assuming that logger is offline</description>
				<default>10</default>
			</parameter>
			<parameter name="maxOfflineTime" type="integer">
				<label>maxOfflineTime</label>
				<description>Maximum time (in minutes) in which logger is assumed to be offline</description>
				<default>2160</default>
			</parameter>
		</config-description>
	</thing-type>

	<channel-type id="online-channel">
		<item-type>Switch</item-type>
		<label>Online</label>
		<description>Determines whether logger is online/offline</description>
		<state readOnly="true" />
	</channel-type>

	<channel-type id="lsw-operatingState-channel">
		<item-type>String</item-type>
		<label>Operating State</label>
		<description>Possible values: Unknown, Check, Normal, Fault, Permanent</description>
		<category>Status</category>
		<state readOnly="true">
			<options>
				<option value="waiting">Waiting</option>
				<option value="detection">Detection</option>
				<option value="grid-connected">Grid connected</option>
				<option value="emergency-power-supply">Emergency power supply</option>
				<option value="recoverable-fault">Recoverable fault</option>
				<option value="permanent-fault">Permanent fault</option>
				<option value="upgrade">Upgrade</option>
				<option value="self-charging">Self-charging</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="SN23xLoggerV5-operatingState-channel">
		<item-type>String</item-type>
		<label>Operating State</label>
		<description>Possible values: Unknown, Check, Normal, Fault, Permanent</description>
		<category>Status</category>
		<state readOnly="true">
			<options>
				<option value="Unknown">Unknown</option>
				<option value="Check">Check</option>
				<option value="Normal">Normal</option>
				<option value="Fault">Fault</option>
				<option value="Permanent">Permanent</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="fault-channel">
		<item-type>String</item-type>
		<label>Fault description</label>
		<description>Description of a fault</description>
		<state readOnly="true" />
	</channel-type>

	<channel-type id="gridVoltage-channel">
		<item-type>Number:ElectricPotential</item-type>
		<label>Grid current</label>
		<category>Voltage</category>
		<state readOnly="true" pattern="%.1f %unit%" />
	</channel-type>

	<channel-type id="gridCurrent-channel">
		<item-type>Number:ElectricCurrent</item-type>
		<label>Grid Current</label>
		<category>Current</category>
		<state readOnly="true" pattern="%.2f %unit%" />
	</channel-type>

	<channel-type id="gridPower-channel">
		<item-type>Number:Power</item-type>
		<label>Grid Power</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="activePower-channel">
		<item-type>Number:Power</item-type>
		<label>Active Power</label>
		<description>Current generated active power</description>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="reactivePower-channel">
		<item-type>Number:Power</item-type>
		<label>Reactive Power</label>
		<description>Current generated active power</description>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="apparentPower-channel">
		<item-type>Number:Power</item-type>
		<label>Reactive Power</label>
		<description>Current generated active power</description>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="outputFrequency-channel">
		<item-type>Number:Frequency</item-type>
		<label>Output Frequency</label>
		<description>Frequency of the AC generated</description>
		<state readOnly="true" pattern="%.2f %unit%" />
	</channel-type>

	<channel-type id="acVoltage-channel">
		<item-type>Number:ElectricPotential</item-type>
		<label>Voltage</label>
		<category>Voltage</category>
		<state readOnly="true" pattern="%.1f %unit%" />
	</channel-type>

	<channel-type id="acCurrent-channel">
		<item-type>Number:ElectricCurrent</item-type>
		<label>Current</label>
		<category>Current</category>
		<state readOnly="true" pattern="%.2f %unit%" />
	</channel-type>

	<channel-type id="totalEnergyProduction-channel">
		<item-type>Number:Energy</item-type>
		<label>Total Energy Production</label>
		<description>Total production in kWh since inverter setup</description>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="totalGenerationTime-channel">
		<item-type>Number:Time</item-type>
		<label>Total Generation Time</label>
		<description>Total generation time in hours of being operational and producing energy</description>
		<category>Time</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="todayEnergyProduction-channel">
		<item-type>Number:Energy</item-type>
		<label>Today Energy Production</label>
		<description>Today production in kWh since inverter setup</description>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="todayGenerationTime-channel">
		<item-type>Number:Time</item-type>
		<label>Today Generation Time</label>
		<description>Today generation time in minutes of being operational and producing energy</description>
		<category>Time</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="temperature-channel">
		<item-type>Number:Temperature</item-type>
		<label>Temperature</label>
		<description>Temperature</description>
		<category>Temperature</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="countdown-channel">
		<item-type>Number:Time</item-type>
		<label>Countdown time</label>
		<description>Countdown time</description>
		<category>Time</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>

	<channel-type id="powerfactor-channel">
		<item-type>Number:Dimensionless</item-type>
		<label>Power factor</label>
		<description>Power factor</description>
		<category>Energy</category>
		<state readOnly="true" pattern="%.0f %unit%" />
	</channel-type>
</thing:thing-descriptions>